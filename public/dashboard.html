<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="apple-touch-icon" sizes="76x76" href="public/assets-dashboard/img/apple-icon.png" />
		<link rel="icon" type="image/png" href="public/assets-dashboard/img/favicon.png" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<title>
			Crime Alert System Dashboard
		</title>
		<meta
			content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no"
			name="viewport"
		/>
		<!--     Fonts and icons     -->
		<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
		<link
			rel="stylesheet"
			href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"
			integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr"
			crossorigin="anonymous"
		/>
		<!-- CSS Files -->
		<link href="public/assets-dashboard/css/bootstrap.min.css" rel="stylesheet" />
		<link href="public/assets-dashboard/css/now-ui-dashboard.css?v=1.3.0" rel="stylesheet" />
		<!-- CSS Just for demo purpose, don't include it in your project -->
		<link href="public/assets-dashboard/demo/demo.css" rel="stylesheet" />
	</head>

	<body class="">
		<div class="wrapper ">
			<div class="sidebar" data-color="blue">
				<!--
        Tip 1: You can change the color of the sidebar using: data-color="blue | green | orange | red | yellow"
    -->
				<div class="sidebar-wrapper" id="sidebar-wrapper">
					<ul class="nav">
						<li class="active ">
							<a href="/dashboard">
								<i class="now-ui-icons design_app"></i>
								<p>Dashboard</p>
							</a>
						</li>
						<li>
							<a href="/map">
								<i class="now-ui-icons location_map-big"></i>
								<p>Heat Maps</p>
							</a>
						</li>
						<li>
							<a href="/cases">
								<i class="now-ui-icons design_bullet-list-67"></i>
								<p>Reported Cases</p>
							</a>
						</li>
						<li class="">
							<a href="/newCase">
								<i class="now-ui-icons files_paper"></i>
								<p>Add Case</p>
							</a>
						</li>
						<li class="">
							<a href="/newUser">
								<i class="now-ui-icons users_single-02"></i>
								<p>Add Station</p>
							</a>
						</li>
						<li class="">
							<a href="/logout">
								<i class="now-ui-icons ui-1_simple-remove"></i>
								<p>Logout</p>
							</a>
						</li>
					</ul>
				</div>
			</div>
			<div class="main-panel" id="main-panel">
				<div class="panel-header panel-header-lg">
					<canvas id="bigDashboardChart"></canvas>
				</div>
				<div class="content">
					<div class="row">
						<div class="col-lg-12 col-md-12">
							<div class="card card-chart">
								<div class="card-header">
									<h5 class="card-category">Statistics</h5>
									<h4 class="card-title">Theft</h4>
								</div>
								<div class="card-body">
									<h1 id="theft"></h1>
								</div>
							</div>
							<div class="card card-chart">
								<div class="card-header">
									<h5 class="card-category">Statistics</h5>
									<h4 class="card-title">DUI</h4>
								</div>
								<div class="card-body">
									<h1 id="dui"></h1>
								</div>
							</div>
							<div class="card card-chart">
								<div class="card-header">
									<h5 class="card-category">Statistics</h5>
									<h4 class="card-title">Assault</h4>
								</div>
								<div class="card-body">
									<h1 id="assault"></h1>
								</div>
							</div>
							<div class="card card-chart">
								<div class="card-header">
									<h5 class="card-category">Statistics</h5>
									<h4 class="card-title">Battery</h4>
								</div>
								<div class="card-body">
									<h1 id="battery"></h1>
								</div>
							</div>

							<div class="card card-chart">
								<div class="card-header">
									<h5 class="card-category">Statistics</h5>
									<h4 class="card-title">Rape</h4>
								</div>
								<div class="card-body">
									<h1 id="rape"></h1>
								</div>
							</div>

							<div class="card card-chart">
								<div class="card-header">
									<h5 class="card-category">Statistics</h5>
									<h4 class="card-title">Hit And Run</h4>
								</div>
								<div class="card-body">
									<h1 id="hit and run"></h1>
								</div>
							</div>

							<div class="card card-chart">
								<div class="card-header">
									<h5 class="card-category">Statistics</h5>
									<h4 class="card-title">Hit And Run</h4>
								</div>
								<div class="card-body">
									<h1 id="robbery"></h1>
								</div>
							</div>

							<div class="card card-chart">
								<div class="card-header">
									<h5 class="card-category">Statistics</h5>
									<h4 class="card-title">Robbery</h4>
								</div>
								<div class="card-body">
									<h1 id="robbery"></h1>
								</div>
							</div>

							<div class="card card-chart">
								<div class="card-header">
									<h5 class="card-category">Statistics</h5>
									<h4 class="card-title">Arson</h4>
								</div>
								<div class="card-body">
									<h1 id="arson"></h1>
								</div>
							</div>

							<div class="card card-chart">
								<div class="card-header">
									<h5 class="card-category">Statistics</h5>
									<h4 class="card-title">Burglary</h4>
								</div>
								<div class="card-body">
									<h1 id="burglary"></h1>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-12">
							<div class="card">
								<div class="card-header">
									<h5 class="card-category">Crime Reports</h5>
									<br />
									<h4 class="card-title">All Persons List</h4>
								</div>
								<div class="card-body">
									<div class="table-responsive">
										<table class="table">
											<thead class=" text-info">
												<th>
													Victim
												</th>
												<th>
													Age
												</th>
												<th>
													Crime
												</th>
												<th>
													Description
												</th>
												<th>
													Location
												</th>
											</thead>
											<tbody id="table-body"></tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--   Core JS Files   -->
		<script src="public/assets-dashboard/js/core/jquery.min.js"></script>
		<script src="public/assets-dashboard/js/core/popper.min.js"></script>
		<script src="public/assets-dashboard/js/core/bootstrap.min.js"></script>
		<script src="public/assets-dashboard/js/plugins/perfect-scrollbar.jquery.min.js"></script>
		<!-- Chart JS -->
		<script src="public/assets-dashboard/js/plugins/chartjs.min.js"></script>
		<!--  Notifications Plugin    -->
		<script src="public/assets-dashboard/js/plugins/bootstrap-notify.js"></script>
		<!-- Control Center for Now Ui Dashboard: parallax effects, scripts for the example pages etc -->
		<script
			src="public/assets-dashboard/js/now-ui-dashboard.min.js?v=1.3.0"
			type="text/javascript"
		></script>
		<!-- Now Ui Dashboard DEMO methods, don't include it in your project! -->
		<script src="public/assets-dashboard/demo/demo.js"></script>
		<script>
			$(document).ready(function() {
				// Javascript method's body can be found in assets/js/demos.js
				demo.initDashboardPageCharts();
			});
		</script>
		<script>
			fetch('https://caszw.herokuapp.com/getCases', {
				method: 'GET'
			})
				.then(res => res.json())
				.then(res => {
					res.cases.map((value, i) => {
						$('#table-body').append(
							`
              <tr>
                        <td>
                          ${value.name}
                        </td>
                        <td>
                          ${value.age}
                        </td>
                        <td>
                          ${value.type}
                        </td>
                        <td>
                          ${value.description}
                        </td>
                        <td>
                          ${[value.location.latitude, value.location.longitude].toString()}
                        </td>
                      </tr>
              `
						);
					});
				})
				.catch(error => console.log(error));
		</script>

		<script>
			fetch('/getStatistics', {
				method: 'GET'
			})
				.then(res => res.json())
				.then(res => {
					const type = [
						'theft',
						'dui',
						'assault',
						'battery',
						'rape',
						'hit and run',
						'robbery',
						'arson',
						'burglary'
					];

					type.map((value, i) => {
						document.getElementById(value).textContent = res.results[i];
					});
				})
				.catch(error => console.log(error));
		</script>
	</body>
</html>
